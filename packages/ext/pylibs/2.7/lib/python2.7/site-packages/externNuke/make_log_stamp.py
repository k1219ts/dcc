# -*- coding: utf-8 -*-
import sys
import os
import subprocess
#import getpass

def make_log_stamp(platePath, start, end, shotName, username, is1011=False,
                   project='LOG', script='', fps='24'):
    
    #sys.exec_prefix = '/usr/local/Nuke9.0v5'    
    pythonPath = "/netapp/backstage/pub/lib/tactic"
    pythonPath += ":/netapp/backstage/pub/lib/zeelos/lib"
    pythonPath += ":/netapp/backstage/pub/lib/zelos/py"
    pythonPath += ":/netapp/backstage/pub/lib/python_lib"

    virEnv = os.environ.copy()   
    virEnv['PYTHONPATH']= pythonPath
    virEnv['PYTHONHOME']= '/usr/local/Nuke9.0v5'
    virEnv['LD_LIBRARY_PATH']='/opt/ffmpeg/lib:/lib64:/usr/lib64:/usr/local/lib64:/usr/local/cuda/lib64:/usr/local/cuda/lib:/netapp/backstage/pub/apps/renderman/lib'

    exe = '/usr/local/Nuke9.0v5/Nuke9.0'    
    convertFile = '/netapp/backstage/pub/lib/python_lib/externNuke/nuke_convert.py'    
    arg = [exe, '-t', convertFile, platePath, str(start), str(end), 
           shotName, username, str(is1011), project, str(script), 'fps'+str(fps)]
    print arg
    prc = subprocess.Popen(arg, env=virEnv)
    prc.communicate()
    print prc.returncode
         

#imagePath='/dexter/Cache_DATA/comp/TD_hslth/dpx_test/ani_test/TRI_1390_ani_v07_w09/TRI_1390_ani_v07_w05.#####.jpg'
#make_log_stamp(imagePath, 1, 280, 'TRI_1390', 'taehyung.lee', True, 'NJJL', 'test.mb')


